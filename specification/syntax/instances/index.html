<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><script type=text/javascript src=/metaschema/module/hugo-uswds/js/uswds-init.min.js></script><link rel=preload href=/metaschema/module/hugo-uswds/js/uswds.min.js as=script><link rel=stylesheet href=/metaschema/module/hugo-uswds/css/styles.css><title>Instances</title>
<script type=application/javascript>var doNotTrack=!1;doNotTrack||(window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-66610693-1","auto"),ga("send","pageview"))</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src=/metaschema/module/hugo-uswds/js/jquery.min.js></script><script type=text/javascript defer src=/metaschema/module/hugo-uswds/js/hugo-uswds.min.js></script></head><body><a class=usa-skipnav href=#main-content>Skip to main content</a><section class=usa-banner aria-label="Official website of the United States government"><div class=usa-accordion><header class=usa-banner__header><div class=usa-banner__inner><div class=grid-col-auto><img aria-hidden=true class=usa-banner__header-flag src=/metaschema/module/hugo-uswds/img/us_flag_small.png alt></div><div class="grid-col-fill tablet:grid-col-auto" aria-hidden=true><p class=usa-banner__header-text>An official website of the United States government</p><p class=usa-banner__header-action>Here’s how you know</p></div><button type=button class="usa-accordion__button usa-banner__button" aria-expanded=false aria-controls=gov-banner-default-default>
<span class=usa-banner__button-text>Here’s how you know</span></button></div></header><div class="usa-banner__content usa-accordion__content" id=gov-banner-default-default><div class="grid-row grid-gap-lg"><div class="usa-banner__guidance tablet:grid-col-6"><img class="usa-banner__icon usa-media-block__img" src=/metaschema/module/hugo-uswds/img/icon-dot-gov.svg role=img alt aria-hidden=true><div class=usa-media-block__body><p><strong>Official websites use .gov</strong><br>A
<strong>.gov</strong> website belongs to an official government
organization in the United States.</p></div></div><div class="usa-banner__guidance tablet:grid-col-6"><img class="usa-banner__icon usa-media-block__img" src=/metaschema/module/hugo-uswds/img/icon-https.svg role=img alt aria-hidden=true><div class=usa-media-block__body><p><strong>Secure .gov websites use HTTPS</strong><br>A
<strong>lock</strong> (
<span class=icon-lock><svg xmlns="http://www.w3.org/2000/svg" width="52" height="64" viewBox="0 0 52 64" class="usa-banner__lock-image" role="img" aria-labelledby="banner-lock-description-default" focusable="false"><title id="banner-lock-title-default">Lock</title><desc id="banner-lock-description-default">Locked padlock icon</desc><path fill="#000" fill-rule="evenodd" d="M26 0c10.493.0 19 8.507 19 19v9h3a4 4 0 014 4v28a4 4 0 01-4 4H4a4 4 0 01-4-4V32a4 4 0 014-4h3v-9C7 8.507 15.507.0 26 0zm0 8c-5.979.0-10.843 4.77-10.996 10.712L15 19v9h22v-9c0-6.075-4.925-11-11-11z"/></svg></span>) or <strong>https://</strong> means you’ve safely connected to
the .gov website. Share sensitive information only on official,
secure websites.</p></div></div></div></div></div></section><div class=usa-overlay></div><header class="usa-header usa-header--extended site-header"><div class="usa-navbar site-header__navbar"><div id=extended-logo class="usa-logo site-logo"><em class="usa-logo__text site-logo__text"><a href=/metaschema title="Metaschema Information Modeling Framework" aria-label=Home><span class=site-title--short>Metaschema</span>
<span class=site-title--long>Metaschema Information Modeling Framework</span></a></em></div><div class="site-nav-secondary usa-nav__secondary"><ul class=usa-nav__secondary-links><li class=usa-nav__secondary-item><a href=/metaschema/contribute/contact/>Contact Us</a></li><li class=usa-nav__secondary-item><a href=/metaschema/contribute/>Get involved</a></li><li class=usa-nav__secondary-item><a href=https://github.com/usnistgov/metaschema>Github</a></li></ul><section aria-label="Search component"><form class="usa-search usa-search--small" role=search action=https://search.usa.gov/search><input id=affiliate name=affiliate type=hidden value=metaschema>
<input name=utf8 type=hidden value=&#x2713;>
<label class=usa-sr-only for=search-field-en-small>Search</label>
<input class=usa-input id=search-field-en-small type=search name=query>
<button class=usa-button type=submit><img src=/metaschema/module/hugo-uswds/img/usa-icons-bg/search--white.svg class=usa-search__submit-icon alt=Search></button></form></section></div><button class=usa-menu-btn>Menu</button></div></header><nav class="site-nav usa-nav sticky" aria-label="Primary navigation"><div class="usa-nav__inner site-nav__inner"><button class=usa-nav__close><img src=/metaschema/module/hugo-uswds/img/usa-icons/close.svg role=img alt=close></button><ul class="usa-nav__primary usa-accordion"><li class=usa-nav__primary-item><a class=usa-nav__link href=/metaschema/specification/><span>Specification</span></a></li><li class=usa-nav__primary-item><a class=usa-nav__link href=/metaschema/tutorials/><span>Tutorials</span></a></li><li class=usa-nav__primary-item><a class=usa-nav__link href=/metaschema/use/><span>Using</span></a></li><li class=usa-nav__primary-item><a class=usa-nav__link href=/metaschema/contribute/><span>Contribute</span></a></li></ul></div></nav><div class=site-content-container><aside id=page-side-navigation class="sidenav site-sidenav" aria-label="Section navigation"><nav aria-label="Secondary navigation"><ul class=usa-sidenav><li class="usa-sidenav__item section usa-subnav__top-level"><a href=/metaschema/specification/>Metaschema Specification</a><ul class=usa-sidenav__sublist><li class="usa-sidenav__item page"><a href=/metaschema/specification/overview/>Overview</a></li><li class="usa-sidenav__item page"><a href=/metaschema/specification/information-modeling/>Information Modeling</a></li><li class="usa-sidenav__item section"><a href=/metaschema/specification/syntax/>Syntax</a><ul class=usa-sidenav__sublist><li class="usa-sidenav__item page"><a href=/metaschema/specification/syntax/module/>Module</a></li><li class="usa-sidenav__item page"><a href=/metaschema/specification/syntax/definitions/>Definitions</a></li><li class="usa-sidenav__item page"><a class=usa-current href=/metaschema/specification/syntax/instances/>Instances</a></li><li class="usa-sidenav__item page"><a href=/metaschema/specification/syntax/inline-definitions/>Inline Definitions</a></li><li class="usa-sidenav__item page"><a href=/metaschema/specification/syntax/constraints/>Constraints</a></li><li class="usa-sidenav__item page"><a href=/metaschema/specification/syntax/metapath/>Metapath Expression Language</a></li></ul></li><li class="usa-sidenav__item page"><a href=/metaschema/specification/mapping/>Format Bindings</a></li><li class="usa-sidenav__item page"><a href=/metaschema/specification/datatypes/>Data Types</a></li><li class="usa-sidenav__item page"><a href=/metaschema/specification/glossary/>Glossary</a></li></ul></li></ul></nav></aside><div class=usa-in-page-nav-container><aside class=site-in-page-nav aria-label="On this page" data-heading-selectors="h2, h3, h4, h5, h6" data-scroll-offset=-120 data-root-margin="48px 0px -90% 0px" data-threshold=1><nav class=usa-in-page-nav__nav aria-label="On this page"><h4 class=usa-in-page-nav__heading tabindex=0>On this page</h4><ul class=usa-in-page-nav__list><li class=usa-in-page-nav__item><a href=#common-instance-data class="site-in-page-nav__link h2">Common Instance Data</a></li><li class="usa-in-page-nav__item usa-in-page-nav__item--sub-item"><a href=#deprecated-version class="site-in-page-nav__link h3"><code>@deprecated</code> Version</a></li><li class="usa-in-page-nav__item usa-in-page-nav__item--sub-item"><a href=#ref class="site-in-page-nav__link h3"><code>@ref</code></a></li><li class="usa-in-page-nav__item usa-in-page-nav__item--sub-item"><a href=#formal-name class="site-in-page-nav__link h3"><code>&lt;formal-name></code></a></li><li class="usa-in-page-nav__item usa-in-page-nav__item--sub-item"><a href=#description class="site-in-page-nav__link h3"><code>&lt;description></code></a></li><li class="usa-in-page-nav__item usa-in-page-nav__item--sub-item"><a href=#prop class="site-in-page-nav__link h3"><code>&lt;prop></code></a></li><li class="usa-in-page-nav__item usa-in-page-nav__item--sub-item"><a href=#naming-and-use-name class="site-in-page-nav__link h3">Naming and <code>&lt;use-name></code></a></li><li class="usa-in-page-nav__item usa-in-page-nav__item--sub-item"><a href=#remarks class="site-in-page-nav__link h3"><code>&lt;remarks></code></a></li><li class=usa-in-page-nav__item><a href=#flag-instance class="site-in-page-nav__link h2"><code>&lt;flag></code> Instance</a></li><li class="usa-in-page-nav__item usa-in-page-nav__item--sub-item"><a href=#required class="site-in-page-nav__link h3"><code>@required</code></a></li><li class=usa-in-page-nav__item><a href=#model-instances class="site-in-page-nav__link h2">Model Instances</a></li><li class=usa-in-page-nav__item><a href=#named-model-instances class="site-in-page-nav__link h2">Named Model Instances</a></li><li class="usa-in-page-nav__item usa-in-page-nav__item--sub-item"><a href=#common-named-model-instance-data class="site-in-page-nav__link h3">Common Named Model Instance Data</a></li><li class="usa-in-page-nav__item usa-in-page-nav__item--sub-item"><a href=#max-occurs class="site-in-page-nav__link h4"><code>@max-occurs</code></a></li><li class="usa-in-page-nav__item usa-in-page-nav__item--sub-item"><a href=#min-occurs class="site-in-page-nav__link h4"><code>@min-occurs</code></a></li><li class="usa-in-page-nav__item usa-in-page-nav__item--sub-item"><a href=#group-as class="site-in-page-nav__link h4"><code>&lt;group-as></code></a></li><li class="usa-in-page-nav__item usa-in-page-nav__item--sub-item"><a href=#in-json class="site-in-page-nav__link h5"><code>@in-json</code></a></li><li class="usa-in-page-nav__item usa-in-page-nav__item--sub-item"><a href=#in-jsonarray class="site-in-page-nav__link h6"><code>@in-json="ARRAY"</code></a></li><li class="usa-in-page-nav__item usa-in-page-nav__item--sub-item"><a href=#in-jsonsingleton_or_array class="site-in-page-nav__link h6"><code>@in-json="SINGLETON_OR_ARRAY"</code></a></li><li class="usa-in-page-nav__item usa-in-page-nav__item--sub-item"><a href=#in-jsonby_key class="site-in-page-nav__link h6"><code>@in-json="BY_KEY"</code></a></li><li class="usa-in-page-nav__item usa-in-page-nav__item--sub-item"><a href=#in-xml class="site-in-page-nav__link h5"><code>@in-xml</code></a></li><li class="usa-in-page-nav__item usa-in-page-nav__item--sub-item"><a href=#in-xmlgrouped class="site-in-page-nav__link h6"><code>@in-xml="GROUPED"</code></a></li><li class="usa-in-page-nav__item usa-in-page-nav__item--sub-item"><a href=#in-xmlungrouped class="site-in-page-nav__link h6"><code>@in-xml="UNGROUPED"</code></a></li><li class="usa-in-page-nav__item usa-in-page-nav__item--sub-item"><a href=#name class="site-in-page-nav__link h5"><code>@name</code></a></li><li class="usa-in-page-nav__item usa-in-page-nav__item--sub-item"><a href=#instance-naming class="site-in-page-nav__link h3">Instance Naming</a></li><li class="usa-in-page-nav__item usa-in-page-nav__item--sub-item"><a href=#field-instance class="site-in-page-nav__link h3"><code>&lt;field></code> Instance</a></li><li class="usa-in-page-nav__item usa-in-page-nav__item--sub-item"><a href=#in-xml-1 class="site-in-page-nav__link h4"><code>@in-xml</code></a></li><li class="usa-in-page-nav__item usa-in-page-nav__item--sub-item"><a href=#define-field-instance class="site-in-page-nav__link h3"><code>&lt;define-field></code> Instance</a></li><li class="usa-in-page-nav__item usa-in-page-nav__item--sub-item"><a href=#assembly-instance class="site-in-page-nav__link h3"><code>&lt;assembly></code> Instance</a></li><li class="usa-in-page-nav__item usa-in-page-nav__item--sub-item"><a href=#define-assembly-instance class="site-in-page-nav__link h3"><code>&lt;define-assembly></code> Instance</a></li><li class=usa-in-page-nav__item><a href=#other-model-instance-types class="site-in-page-nav__link h2">Other Model Instance Types</a></li><li class="usa-in-page-nav__item usa-in-page-nav__item--sub-item"><a href=#choice-selections class="site-in-page-nav__link h3"><code>&lt;choice></code> Selections</a></li><li class="usa-in-page-nav__item usa-in-page-nav__item--sub-item"><a href=#any class="site-in-page-nav__link h3"><code>&lt;any></code></a></li></ul></nav></aside><main id=main-content class="main-content usa-prose"><header><nav class=usa-breadcrumb aria-label=Breadcrumbs><ol class=usa-breadcrumb__list><li class="usa-breadcrumb__list-item usa-current"><a href=/metaschema/specification/ class=usa-breadcrumb__link aria-current=page><span>Metaschema Specification</span></a></li><li class="usa-breadcrumb__list-item usa-current"><a href=/metaschema/specification/syntax/ class=usa-breadcrumb__link aria-current=page><span>Syntax</span></a></li><li class="usa-breadcrumb__list-item usa-current"><a href=/metaschema/specification/syntax/instances/ class=usa-breadcrumb__link aria-current=page><span>Instances</span></a></li></ol></nav></header><h1 id=instances><a href=#instances>Instances</a></h1><p>In a Metaschema module, complex information elements are created through composition. Through composition, an information element can be built by indicating which other information elements are used as its constituent parts.</p><p>An <em>instance</em> is used to declare an information element <em>child</em> within a <em>parent</em> information element. Each instance is a <em>flag instance</em>, <em>field instance</em>, or <em>assembly instance</em>, and either references an existing <a href=/metaschema/specification/syntax/definitions/><em>top-level definition</em></a> by name or provides an <a href=/metaschema/specification/syntax/inline-definitions/><em>inline definition</em></a>.</p><p>In a Metaschema module, an instance appears inside the definition of its parent information element.</p><ul><li>An <em>assembly definition</em> may contain flag, field or assembly instances reflecting the objects to be permitted in that assembly.</li><li>A <em>field definition</em> may only include flag instances.</li><li>A flag definition never contains instances since flags have no children in the model, only values.</li></ul><h2 id=common-instance-data><a href=#common-instance-data>Common Instance Data</a></h2><p>The <a href=/metaschema/specification/syntax/instances/#assembly-instance><code>&lt;assembly></code></a>, <a href=/metaschema/specification/syntax/instances/#field-instance><code>&lt;field></code></a>, and <a href=/metaschema/specification/syntax/instances/#flag-instance><code>&lt;flag></code></a> child elements share a common syntax composed of the following XML attributes and elements.</p><p>Attributes:</p><table><thead><tr><th style=text-align:left>Attribute</th><th style=text-align:left>Data Type</th><th style=text-align:left>Use</th><th style=text-align:left>Default Value</th></tr></thead><tbody><tr><td style=text-align:left><a href=/metaschema/specification/syntax/instances/#deprecated-version><code>@deprecated</code></a></td><td style=text-align:left>version (<a href=/metaschema/specification/datatypes/#string><code>string</code></a>)</td><td style=text-align:left>optional</td><td style=text-align:left><em>(no default)</em></td></tr><tr><td style=text-align:left><a href=/metaschema/specification/syntax/instances/#ref><code>@ref</code></a></td><td style=text-align:left><a href=/metaschema/specification/datatypes/#token><code>token</code></a></td><td style=text-align:left>required</td><td style=text-align:left><em>(no default)</em></td></tr></tbody></table><p>Elements:</p><table><thead><tr><th style=text-align:left>Element</th><th style=text-align:left>Data Type</th><th style=text-align:left>Use</th></tr></thead><tbody><tr><td style=text-align:left><a href=/metaschema/specification/syntax/instances/#formal-name><code>&lt;formal-name></code></a></td><td style=text-align:left><a href=/metaschema/specification/datatypes/#string><code>string</code></a></td><td style=text-align:left>0 or 1</td></tr><tr><td style=text-align:left><a href=/metaschema/specification/syntax/instances/#description><code>&lt;description></code></a></td><td style=text-align:left><a href=/metaschema/specification/datatypes/#markup-line><code>markup-line</code></a></td><td style=text-align:left>0 or 1</td></tr><tr><td style=text-align:left><a href=/metaschema/specification/syntax/instances/#prop><code>&lt;prop></code></a></td><td style=text-align:left>special</td><td style=text-align:left>0 to ∞</td></tr><tr><td style=text-align:left><a href=/metaschema/specification/syntax/instances/#naming-and-use-name><code>&lt;use-name></code></a></td><td style=text-align:left><a href=/metaschema/specification/datatypes/#token><code>token</code></a></td><td style=text-align:left>0 or 1</td></tr><tr><td style=text-align:left><a href=/metaschema/specification/syntax/instances/#remarks><code>&lt;remarks></code></a></td><td style=text-align:left>special</td><td style=text-align:left>0 or 1</td></tr></tbody></table><p>These attributes and elements are described in the following subsections.</p><h3 id=deprecated-version><a href=#deprecated-version><code>@deprecated</code> Version</a></h3><p>The optional <code>@deprecated</code> attribute communicates that a given compositional use of the referenced information element is intended to be discontinued starting with the specified version.</p><p>This version is a reference to the <a href=/metaschema/specification/syntax/module/#schema-version><code>&lt;schema-version></code></a> declared in the module header.</p><p>If both the definition and the instance declare a <code>@deprecated</code> version, the value provided by the instance MUST override the value provided by the definition.</p><div class=callout><p>Declaring the <code>@deprecated</code> attribute communicates to content creators that the use of a given instance of the information element is to be avoided. This is more fine-grained than deprecating all uses of the information element, which is supported by the <a href=/metaschema/#deprecated-version><code>@deprecated</code></a> attribute on the referenced definition.</p><p>This annotation can be used in documentation generation and in Metaschema-aware tools that provide context around use of the instance.</p></div><p>For example, deprecating the use of the flag named <code>id</code> within the <code>computer</code> assembly starting with the model version <code>1.1.0</code> would be represented as follows.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=hl><span class=lnt>6
</span></span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-xml data-lang=xml><span class=line><span class=cl><span class=nt>&lt;define-flag</span> <span class=na>name=</span><span class=s>&#34;id&#34;</span><span class=nt>/&gt;</span>
</span></span><span class=line><span class=cl><span class=nt>&lt;define-assembly</span> <span class=na>name=</span><span class=s>&#34;computer&#34;</span><span class=nt>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=nt>&lt;root-name&gt;</span>computer<span class=nt>&lt;/root-name&gt;</span>
</span></span><span class=line><span class=cl>  <span class=nt>&lt;flag</span> <span class=na>ref=</span><span class=s>&#34;id&#34;</span>
</span></span><span class=line><span class=cl>    <span class=na>required=</span><span class=s>&#34;yes&#34;</span>
</span></span><span class="line hl"><span class=cl>    <span class=na>deprecated=</span><span class=s>&#34;1.1.0&#34;</span><span class=nt>/&gt;</span>
</span></span><span class=line><span class=cl><span class=nt>&lt;/define-assembly&gt;</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=ref><a href=#ref><code>@ref</code></a></h3><p>The <code>@ref</code> attribute references the top-level definition that the instance represents through composition. The name indicated by the <code>@ref</code> attribute MUST be a definition of the corresponding type declared in the containing module or a globally scoped definition in an imported module. See <a href=/metaschema/specification/syntax/module/#definition-name-resolution>Definition Name Resolution</a>.</p><p>The instance type corresponds with the definition type as follows.</p><table><thead><tr><th style=text-align:left>Instance Type</th><th style=text-align:left>Top-Level Definition Type</th></tr></thead><tbody><tr><td style=text-align:left><a href=/metaschema/specification/syntax/instances/#flag-instance><code>&lt;flag></code></a></td><td style=text-align:left><a href=/metaschema/specification/syntax/definitions/#top-level-define-flag><code>&lt;define-flag></code></a></td></tr><tr><td style=text-align:left><a href=/metaschema/specification/syntax/instances/#field-instance><code>&lt;field></code></a></td><td style=text-align:left><a href=/metaschema/specification/syntax/definitions/#top-level-define-field><code>&lt;define-field></code></a></td></tr><tr><td style=text-align:left><a href=/metaschema/specification/syntax/instances/#assembly-instance><code>&lt;assembly></code></a></td><td style=text-align:left><a href=/metaschema/specification/syntax/definitions/#top-level-define-assembly><code>&lt;define-assembly></code></a></td></tr></tbody></table><p><strong>Note:</strong> The names of flags, fields, and assemblies are expected to be maintained as separate identifier sets. This allows a flag, field, and an assembly definition to each have the same name in a given Metaschema module.</p><h3 id=formal-name><a href=#formal-name><code>&lt;formal-name></code></a></h3><p>The optional <code>&lt;formal-name></code> element provides a human-readable, short string label for the instance for use in documentation.</p><p>If provided, this formal name MUST override the <code>&lt;formal-name></code> declared on the corresponding definition, if a <code>&lt;formal-name></code> is declared there. If not provided, the effective formal name of the instance MUST be the <code>&lt;formal-name></code> declared on the definition. If neither the instance nor the definition provides a <code>&lt;formal-name></code>, then the instance MUST NOT have a declared formal name.</p><div class=callout><p>The <code>&lt;formal-name></code> label is intended to provide an easy to recognize, meaningful name for the instance. This element can be used when the formal name of the instance differs in use from the formal name declared by the referenced definition.</p><p>While not required, it is best practice to include a <code>&lt;formal-name></code> when the use case of the instance is more specialized than the intended use described by the definition.</p></div><h3 id=description><a href=#description><code>&lt;description></code></a></h3><p>The optional <code>&lt;description></code> element is a <a href=/metaschema/specification/datatypes/#markup-line>single line of markup</a> that describes the semantic meaning and use of the instance. This information is ideal for use in documentation.</p><p>If provided, this description MUST override the <code>&lt;description></code> declared on the corresponding definition, if a <code>&lt;description></code> is declared there. If not provided on an instance, the effective description of the instance MUST be the <code>&lt;description></code> declared on the definition. If neither the instance nor the definition provides a <code>&lt;description></code>, then the instance MUST NOT have a declared description.</p><div class=callout><p>The description ties the instance to the related information element concept in the information domain that the instance is representing. This element can be used when the description of the instance differs in use from the description declared by the referenced definition.</p><p>While not required, it is best practice to include a <code>&lt;description></code> when the use case of the instance is more specialized than the intended use described by the definition.</p></div><h3 id=prop><a href=#prop><code>&lt;prop></code></a></h3><p>The optional <code>&lt;prop></code> element provides a structure for declaring arbitrary properties, which consist of a <code>@namespace</code>, <code>@name</code>, and <code>@value</code>.</p><p>This data element uses the same syntax as the <a href=/metaschema/specification/syntax/definitions/#prop><code>&lt;prop></code> allowed on a definition</a>. When used on an instance, the set of properties MUST apply only to the instance.</p><p>Properties declared on the definition MAY be inherited by the instance. Metaschema does not define any general rules for how to handle overlapping and conflicting properties. How to handle these cases SHOULD be defined and documented for each property.</p><div class=callout>A property is useful for annotating an instance with additional information that might describe, in a structured way, the semantics, use, nature, or other significant information related to the instance. In many cases, a property might be used to tailor generated documentation or to support an experimental, non-standardized feature in Metaschema.</div><h3 id=naming-and-use-name><a href=#naming-and-use-name>Naming and <code>&lt;use-name></code></a></h3><p>Similar to the <a href=/metaschema/specification/syntax/definitions/#naming-and-use-name><code>&lt;use-name></code></a> allowed on the referenced definition, the optional <code>&lt;use-name></code> on an instance changes the <em>effective name</em> to use for the information element in a compositional data model.</p><p>The <code>&lt;use-name></code> element is optional and MAY only occur once.</p><p>By default the <em>effective name</em> of the information element in a data model is taken from the <a href=/metaschema/specification/syntax/definitions/#naming-and-use-name><em>effective name</em> of the definition</a>. The <code>&lt;use-name></code> value overrides this behavior for the instance only.</p><div class=callout>Use of a <code>&lt;use-name></code> frees the module maintainer allowing them to use a sensible <em>effective name</em> for the instance in a data model.</div><p>The first matching condition determines the <em>effective name</em> for the definition:</p><ol><li>A <code>&lt;use-name></code> is provided on the instance. The <em>effective name</em> is the value of the <code>&lt;use-name></code> element on the instance.</li><li>A <code>&lt;use-name></code> is provided on the definition. The <em>effective name</em> is the value of the <code>&lt;use-name></code> element on the definition.</li><li>No <code>&lt;use-name></code> is provided on the definition. The <em>effective name</em> is the value of the <code>@name</code> attribute on the definition.</li></ol><p>For example:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-xml data-lang=xml><span class=line><span class=cl><span class=nt>&lt;define-flag</span> <span class=na>name=</span><span class=s>&#34;flag-a&#34;</span><span class=nt>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=nt>&lt;use-name&gt;</span>flag-b<span class=nt>&lt;/use-name&gt;</span>
</span></span><span class=line><span class=cl><span class=nt>&lt;/define-flag&gt;</span>
</span></span><span class=line><span class=cl><span class=nt>&lt;define-field</span> <span class=na>name=</span><span class=s>&#34;field&#34;</span><span class=nt>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=nt>&lt;flag</span> <span class=na>ref=</span><span class=s>&#34;flag-a&#34;</span><span class=nt>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;use-name&gt;</span>flag-c<span class=nt>&lt;/use-name&gt;</span>
</span></span><span class=line><span class=cl>  <span class=nt>&lt;/flag&gt;</span>
</span></span><span class=line><span class=cl><span class=nt>&lt;/define-field&gt;</span>
</span></span></code></pre></div><p>In the example above, the <em>effective name</em> of the flag instance is <code>flag-c</code>. If the <code>&lt;use-name></code> was omitted on the instance, the <em>effective name</em> would be <code>flag-b</code>. If the <code>&lt;use-name></code> was also omitted on the definition, the <em>effective name</em> would be <code>flag-a</code>.</p><p>The following content is valid to the model above.</p><div id=tabs-5 class="codetabs usa-accordion"><ul><li class=codetab><button class=usa-accordion__button aria-expanded=true aria-controls=tabs-5-json-tab><span>JSON</span></button></li><li class=codetab><button class=usa-accordion__button aria-expanded=true aria-controls=tabs-5-yaml-tab><span>YAML</span></button></li><li class=codetab><button class=usa-accordion__button aria-expanded=true aria-controls=tabs-5-xml-tab><span>XML</span></button></li></ul><div id=tabs-5-content class=codetab-content><div id=tabs-5-json-tab class=codetab-content-item><div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;field&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;flag-c&#34;</span><span class=p>:</span> <span class=s2>&#34;value&#34;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div></div><div id=tabs-5-yaml-tab class=codetab-content-item><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nn>---</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>field</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>flag-c</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;value&#34;</span><span class=w>
</span></span></span></code></pre></div></div><div id=tabs-5-xml-tab class=codetab-content-item><div class=highlight><pre tabindex=0 class=chroma><code class=language-xml data-lang=xml><span class=line><span class=cl><span class=nt>&lt;field</span> <span class=na>flag-c=</span><span class=s>&#34;value&#34;</span><span class=nt>/&gt;</span>
</span></span></code></pre></div></div></div></div><h3 id=remarks><a href=#remarks><code>&lt;remarks></code></a></h3><p>The optional <code>&lt;remarks></code> element provides a place to add notes related to the use of the instance. Remarks can be used to clarify the semantics of the instance in specific conditions, or to better describe how the instance may be more fully utilized within a model.</p><p>The <code>&lt;remarks></code> element is optional and may occur multiple times.</p><h2 id=flag-instance><a href=#flag-instance><code>&lt;flag></code> Instance</a></h2><p>A <em>flag instance</em> is used to declare that a top-level <a href=/metaschema/specification/syntax/definitions/#top-level-define-flag><em>flag definition</em></a> is part of the model of a <em>field definition</em> or <em>assembly definition</em>.</p><p>Attributes:</p><table><thead><tr><th style=text-align:left>Attribute</th><th style=text-align:left>Data Type</th><th style=text-align:left>Use</th><th style=text-align:left>Default Value</th></tr></thead><tbody><tr><td style=text-align:left><a href=/metaschema/specification/syntax/instances/#deprecated-version><code>@deprecated</code></a></td><td style=text-align:left>version (<a href=/metaschema/specification/datatypes/#string><code>string</code></a>)</td><td style=text-align:left>optional</td><td style=text-align:left><em>(no default)</em></td></tr><tr><td style=text-align:left><a href=/metaschema/specification/syntax/instances/#ref><code>@ref</code></a></td><td style=text-align:left><a href=/metaschema/specification/datatypes/#token><code>token</code></a></td><td style=text-align:left>required</td><td style=text-align:left><em>(no default)</em></td></tr><tr><td style=text-align:left><a href=/metaschema/specification/syntax/instances/#required><code>@required</code></a></td><td style=text-align:left><code>yes</code> or <code>no</code></td><td style=text-align:left>optional</td><td style=text-align:left><code>no</code></td></tr></tbody></table><p>Elements:</p><table><thead><tr><th style=text-align:left>Element</th><th style=text-align:left>Data Type</th><th style=text-align:left>Use</th></tr></thead><tbody><tr><td style=text-align:left><a href=/metaschema/specification/syntax/instances/#formal-name><code>&lt;formal-name></code></a></td><td style=text-align:left><a href=/metaschema/specification/datatypes/#string><code>string</code></a></td><td style=text-align:left>0 or 1</td></tr><tr><td style=text-align:left><a href=/metaschema/specification/syntax/instances/#description><code>&lt;description></code></a></td><td style=text-align:left><a href=/metaschema/specification/datatypes/#markup-line><code>markup-line</code></a></td><td style=text-align:left>0 or 1</td></tr><tr><td style=text-align:left><a href=/metaschema/specification/syntax/instances/#prop><code>&lt;prop></code></a></td><td style=text-align:left>special</td><td style=text-align:left>0 to ∞</td></tr><tr><td style=text-align:left><a href=/metaschema/specification/syntax/instances/#naming-and-use-name><code>&lt;use-name></code></a></td><td style=text-align:left><a href=/metaschema/specification/datatypes/#token><code>token</code></a></td><td style=text-align:left>0 or 1</td></tr><tr><td style=text-align:left><a href=/metaschema/specification/syntax/instances/#remarks><code>&lt;remarks></code></a></td><td style=text-align:left>special</td><td style=text-align:left>0 or 1</td></tr></tbody></table><p>The attributes and elements specific to a <code>&lt;flag></code> instance are described in the following subsections. The elements and attributes common to all instance types are <a href=/metaschema/specification/syntax/instances/#common-instance-data>defined earlier</a> in this specification.</p><p>The <a href=/metaschema/specification/syntax/instances/#ref><code>@ref</code></a> attribute MUST reference a top-level <em>flag definition&rsquo;s</em> <a href=/metaschema/specification/syntax/definitions/#name><code>@name</code></a> that is in scope. See <a href=/metaschema/specification/syntax/module/#definition-name-resolution>Definition Name Resolution</a> for a detailed explanation of definition name scoping.</p><p>The following is an example of a <em>flag instance</em>.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=hl><span class=lnt>4
</span></span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-xml data-lang=xml><span class=line><span class=cl><span class=nt>&lt;define-flag</span> <span class=na>name=</span><span class=s>&#34;id&#34;</span><span class=nt>/&gt;</span>
</span></span><span class=line><span class=cl><span class=nt>&lt;define-assembly</span> <span class=na>name=</span><span class=s>&#34;computer&#34;</span><span class=nt>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=nt>&lt;root-name&gt;</span>computer<span class=nt>&lt;/root-name&gt;</span>
</span></span><span class="line hl"><span class=cl>  <span class=nt>&lt;flag</span> <span class=na>ref=</span><span class=s>&#34;id&#34;</span> <span class=na>required=</span><span class=s>&#34;yes&#34;</span><span class=nt>/&gt;</span>
</span></span><span class=line><span class=cl><span class=nt>&lt;/define-assembly&gt;</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=required><a href=#required><code>@required</code></a></h3><p>The optional <code>@required</code> attribute declares if the flag is required to be provided in an associated content instance.</p><p>The following behaviors are REQUIRED to be used for each value of <code>@required</code>.</p><ul><li><code>no</code> - Do not require the flag to be present in content. This is the default behavior when <code>@required</code> is not declared.</li><li><code>yes</code> - Require the flag to be present in content. Content missing the flag and its value will be considered invalid.</li></ul><h2 id=model-instances><a href=#model-instances>Model Instances</a></h2><p>A <em>model instance</em> is used to declare a relationship to other information elements in an assembly definition&rsquo;s model.</p><p>The following kinds of model instances can be declared as part of the assembly&rsquo;s model.</p><ul><li><a href=/metaschema/specification/syntax/instances/#field-instance><code>&lt;field></code></a> - Instantiates a globally defined <a href=/metaschema/specification/syntax/definitions/#top-level-define-field>field definition</a> as a model instance.</li><li><a href=/metaschema/specification/syntax/inline-definitions/#inline-define-field><code>&lt;define-field></code></a> - Defines a <a href=/metaschema/specification/syntax/inline-definitions/#inline-define-field>single use field</a> for use as a model instance.</li><li><a href=/metaschema/specification/syntax/instances/#assembly-instance><code>&lt;assembly></code></a> - Instantiates a globally defined <a href=/metaschema/specification/syntax/definitions/#top-level-define-assembly>assembly definition</a> as a model instance.</li><li><a href=/metaschema/specification/syntax/inline-definitions/#inline-define-assembly><code>&lt;define-assembly></code></a> - Defines a <a href=/metaschema/specification/syntax/inline-definitions/#inline-define-assembly>single use assembly</a> for use as a model instance.</li><li><a href=/metaschema/specification/syntax/instances/#choice-selections><code>&lt;choice></code></a> - Declares a <a href=/metaschema/specification/syntax/instances/#choice-selections>mutually exclusive selection</a> of child model instances.</li><li><a href=/metaschema/specification/syntax/instances/#any><code>&lt;any></code></a> - Declares a <a href=/metaschema/specification/syntax/instances/#any>placeholder for extra content</a> that is not described by an assembly definition&rsquo;s model.</li></ul><p>The <code>&lt;field></code>, <code>&lt;define-field></code>, <code>&lt;assembly></code>, and <code>&lt;define-assembly></code> model instance types are considered <a href=/metaschema/specification/syntax/instances/#named-model-instances><em>named model instances</em></a>, since they all instantiate either a <a href=/metaschema/specification/syntax/definitions/>top-level</a> or <a href=/metaschema/specification/syntax/inline-definitions/>inline</a> definition that represents a named information element within an assembly&rsquo;s model.</p><p>The <code>&lt;choice></code> and <code>&lt;any></code> elements represent special constructs which differ significantly in their semantics from the named model instances.</p><p>These different types of model instances are discussed in the following subsections.</p><h2 id=named-model-instances><a href=#named-model-instances>Named Model Instances</a></h2><p>The <code>&lt;field></code>, <code>&lt;define-field></code>, <code>&lt;assembly></code>, and <code>&lt;define-assembly></code> model instance types are considered <a href=/metaschema/specification/syntax/instances/#named-model-instances><em>named model instances</em></a>, which instantiate a definition within an assembly&rsquo;s model.</p><p>The <code>&lt;field></code> and <code>&lt;assembly></code> elements are used to instantiate a referenced <a href=/metaschema/specification/syntax/definitions/>top-level definition</a>.</p><p>The <code>&lt;define-field></code> and <code>&lt;define-assembly></code> elements are used to both declare a single use <a href=/metaschema/specification/syntax/inline-definitions/>inline definition</a> and also instantiate the declared definition.</p><h3 id=common-named-model-instance-data><a href=#common-named-model-instance-data>Common Named Model Instance Data</a></h3><p>All named model instances share a common common syntax composed of the following XML attributes and elements. This syntax builds on the <a href=/metaschema/specification/syntax/instances/#common-instance-data>common syntax and semantics</a> shared by all instance types.</p><p>Attributes:</p><table><thead><tr><th style=text-align:left>Attribute</th><th style=text-align:left>Data Type</th><th style=text-align:left>Use</th><th style=text-align:left>Default Value</th></tr></thead><tbody><tr><td style=text-align:left><a href=/metaschema/specification/syntax/instances/#deprecated-version><code>@deprecated</code></a></td><td style=text-align:left>version (<a href=/metaschema/specification/datatypes/#string><code>string</code></a>)</td><td style=text-align:left>optional</td><td style=text-align:left><em>(no default)</em></td></tr><tr><td style=text-align:left><a href=/metaschema/specification/syntax/instances/#ref><code>@max-occurs</code></a></td><td style=text-align:left><a href=/metaschema/specification/datatypes/#non-negative-integer><code>positive-integer</code></a> or <code>unbounded</code></td><td style=text-align:left>optional</td><td style=text-align:left><code>1</code></td></tr><tr><td style=text-align:left><a href=/metaschema/specification/syntax/instances/#ref><code>@min-occurs</code></a></td><td style=text-align:left><a href=/metaschema/specification/datatypes/#non-negative-integer><code>non-negative-integer</code></a></td><td style=text-align:left>optional</td><td style=text-align:left><code>0</code></td></tr><tr><td style=text-align:left><a href=/metaschema/specification/syntax/instances/#ref><code>@ref</code></a></td><td style=text-align:left><a href=/metaschema/specification/datatypes/#token><code>token</code></a></td><td style=text-align:left>required</td><td style=text-align:left><em>(no default)</em></td></tr></tbody></table><p>Elements:</p><table><thead><tr><th style=text-align:left>Element</th><th style=text-align:left>Data Type</th><th style=text-align:left>Use</th></tr></thead><tbody><tr><td style=text-align:left><a href=/metaschema/specification/syntax/instances/#formal-name><code>&lt;formal-name></code></a></td><td style=text-align:left><a href=/metaschema/specification/datatypes/#string><code>string</code></a></td><td style=text-align:left>0 or 1</td></tr><tr><td style=text-align:left><a href=/metaschema/specification/syntax/instances/#description><code>&lt;description></code></a></td><td style=text-align:left><a href=/metaschema/specification/datatypes/#markup-line><code>markup-line</code></a></td><td style=text-align:left>0 or 1</td></tr><tr><td style=text-align:left><a href=/metaschema/specification/syntax/instances/#prop><code>&lt;prop></code></a></td><td style=text-align:left>special</td><td style=text-align:left>0 to ∞</td></tr><tr><td style=text-align:left><a href=/metaschema/specification/syntax/instances/#naming-and-use-name><code>&lt;use-name></code></a></td><td style=text-align:left><a href=/metaschema/specification/datatypes/#token><code>token</code></a></td><td style=text-align:left>0 or 1</td></tr><tr><td style=text-align:left><a href=/metaschema/specification/syntax/instances/#group-as><code>&lt;group-as></code></a></td><td style=text-align:left>special</td><td style=text-align:left>0 or 1</td></tr><tr><td style=text-align:left><a href=/metaschema/specification/syntax/instances/#remarks><code>&lt;remarks></code></a></td><td style=text-align:left>special</td><td style=text-align:left>0 or 1</td></tr></tbody></table><p>The following subsections describe the XML attributes and elements that are specific to named model instances.</p><h4 id=max-occurs><a href=#max-occurs><code>@max-occurs</code></a></h4><p>The optional <code>@max-occurs</code> attribute declares the maximum cardinality bound for the named model instance, which defaults to <code>1</code>.</p><p>This value can be either:</p><ul><li>a <a href=/metaschema/specification/datatypes/#non-negative-integer><code>positive-integer</code></a> value, representing a bounded maximum cardinality; or</li><li>the <code>unbounded</code> value, representing a maximum cardinality with no upper bound.</li></ul><h4 id=min-occurs><a href=#min-occurs><code>@min-occurs</code></a></h4><p>The optional <code>@min-occurs</code> attribute declares the minimum cardinality bound for the named model instance as a <a href=/metaschema/specification/datatypes/#non-negative-integer><code>non-negative-integer</code></a> value, which defaults to <code>0</code>.</p><h4 id=group-as><a href=#group-as><code>&lt;group-as></code></a></h4><p>The <code>&lt;group-as></code> element is required if the <code>@max-occurs</code> attribute has a value greater than &lsquo;1&rsquo; or is <code>unbounded</code>. This element provides additional information about how to handle the collection of data.</p><p>The <code>group-as</code> element has the following set of attributes:</p><table><thead><tr><th style=text-align:left>Attribute</th><th style=text-align:left>Data Type</th><th style=text-align:left>Use</th><th style=text-align:left>Default Value</th></tr></thead><tbody><tr><td style=text-align:left><a href=/metaschema/specification/syntax/instances/#in-json><code>@in-json</code></a></td><td style=text-align:left><code>ARRAY</code>, <code>SINGLETON_OR_ARRAY</code>, or <code>BY_KEY</code></td><td style=text-align:left>optional</td><td style=text-align:left><code>SINGLETON_OR_ARRAY</code></td></tr><tr><td style=text-align:left><a href=/metaschema/specification/syntax/instances/#in-xml><code>@in-xml</code></a></td><td style=text-align:left><code>GROUPED</code>, <code>UNGROUPED</code></td><td style=text-align:left>optional</td><td style=text-align:left><code>UNGROUPED</code></td></tr><tr><td style=text-align:left><a href=/metaschema/specification/syntax/instances/#name><code>@name</code></a></td><td style=text-align:left><a href=/metaschema/specification/datatypes/#token><code>token</code></a></td><td style=text-align:left>required</td><td style=text-align:left><em>(no default)</em></td></tr></tbody></table><h5 id=in-json><a href=#in-json><code>@in-json</code></a></h5><p>The optional <code>@in-json</code> attribute controls the representational form of a group of instances in JSON and YAML.</p><p>When the <code>@in-json</code> attribute and value are not provided, the value MUST default to <code>SINGLETON_OR_ARRAY</code>.</p><p>One of the following behaviors MUST be used based on the provided or default value.</p><table><thead><tr><th style=text-align:left>Value</th><th style=text-align:left>JSON and YAML Behavior</th></tr></thead><tbody><tr><td style=text-align:left><a href=/metaschema/specification/syntax/instances/#in-jsonarray><code>ARRAY</code></a></td><td style=text-align:left>The child value(s) MUST be represented as an array of values.</td></tr><tr><td style=text-align:left><a href=/metaschema/specification/syntax/instances/#in-jsonsingleton_or_array><code>SINGLETON_OR_ARRAY</code></a></td><td style=text-align:left>If a single value is provided, then the child value MUST be that value; otherwise, for multiple values, the child values MUST be represented as an array of values.</td></tr><tr><td style=text-align:left><a href=/metaschema/specification/syntax/instances/#in-jsonby_key><code>BY_KEY</code></a></td><td style=text-align:left>The child value MUST be an intermediate object based on the <code>&lt;json-key></code>.</td></tr></tbody></table><h6 id=in-jsonarray><a href=#in-jsonarray><code>@in-json="ARRAY"</code></a></h6><p>TODO: P2: complete this section.</p><h6 id=in-jsonsingleton_or_array><a href=#in-jsonsingleton_or_array><code>@in-json="SINGLETON_OR_ARRAY"</code></a></h6><p>TODO: P2: complete this section.</p><h6 id=in-jsonby_key><a href=#in-jsonby_key><code>@in-json="BY_KEY"</code></a></h6><p>TODO: P2: Address issue <a href=https://github.com/usnistgov/metaschema/issues/316 rel=external>https://github.com/usnistgov/metaschema/issues/316</a></p><h5 id=in-xml><a href=#in-xml><code>@in-xml</code></a></h5><p>The optional <code>@in-xml</code> attribute controls the representational form of a group of instances in XML.</p><p>When the <code>@in-xml</code> attribute and value are not provided, the value MUST default to <code>UNGROUPED</code>.</p><p>One of the following behaviors MUST be used based on the provided or default value.</p><table><thead><tr><th style=text-align:left>Value</th><th style=text-align:left>XML Behavior</th></tr></thead><tbody><tr><td style=text-align:left><a href=/metaschema/specification/syntax/instances/#in-xmlgrouped><code>GROUPED</code></a></td><td style=text-align:left>The child elements MUST be placed within a wrapper element with a local name equal to the value of the <code>@name</code> attribute. Each child element&rsquo;s local name will be the <a href=/metaschema/specification/syntax/instances/#naming-and-use-name>effective name</a> of the instance.</td></tr><tr><td style=text-align:left><a href=/metaschema/specification/syntax/instances/#in-xmlungrouped><code>UNGROUPED</code></a></td><td style=text-align:left>The child elements MUST appear without a grouping (wrapper) element. The <code>group-as/@name</code> is ignored. Each child element&rsquo;s local name will be the <a href=/metaschema/specification/syntax/instances/#naming-and-use-name>effective name</a> of the instance.</td></tr></tbody></table><h6 id=in-xmlgrouped><a href=#in-xmlgrouped><code>@in-xml="GROUPED"</code></a></h6><p>TODO: P2: complete this section.</p><h6 id=in-xmlungrouped><a href=#in-xmlungrouped><code>@in-xml="UNGROUPED"</code></a></h6><p>TODO: P2: complete this section.</p><h5 id=name><a href=#name><code>@name</code></a></h5><p>The REQUIRED <code>@name</code> attribute declares the grouping name to use in JSON, YAML and XML (when exposed).</p><p>In JSON and YAML, this name is used as the property name.</p><p>In XML, the specific use of the <code>@name</code> is based on the <code>@in-xml</code> attribute&rsquo;s value.</p><div class=callout>While not required, use of a plural form of the <a href=/metaschema/#naming-and-use-name>effective name</a> for the instance is a general convention applied to <code>&lt;group-as></code> naming.</div><h3 id=instance-naming><a href=#instance-naming>Instance Naming</a></h3><p>Given the set of instance names for a <em>definition</em>, a given <em>instance</em> on that definition MUST have a unique effective name. If the instance allows a <a href=/metaschema/specification/syntax/instances/#max-occurs>maximum cardinality</a> greater than <code>1</code>, the <a href=/metaschema/specification/syntax/instances/#name><code>&lt;group-as name></code></a> MUST also be unique within the set of <em>instance names</em> for the <em>definition</em>.</p><p>For <em>field instance</em> values, the effective name of the value, based on a <code>&lt;json-value-key></code> or <code>&lt;json-value-key-flag></code> MUST also be unique within the set of <em>instance names</em> for the <em>definition</em>. This ensures that the property name for the <em>field</em> value is unique in JSON and YAML.</p><p>For <em>field instances</em> that use <a href=/metaschema/specification/syntax/instances/#in-xml-1><code>@in-xml="UNWRAPPED"</code></a>, no other effective instance name in the within the set of <em>instance names</em> for the <em>definition</em> MUST be named in a way that matches the allowed element contents of the <a href=/metaschema/specification/datatypes/#markup-multiline>markup-multiline data type</a> in XML. This ensures that a naming clash with markup data is disallowed.</p><p>With these limitations, a model may be defined to contain any mix of fields and assemblies.</p><div class=callout>In JSON, YAML, and XML, the <a href=/metaschema/#naming-and-use-name>effective names of named instances</a> and the <a href=/metaschema/#group-as>grouping name</a> of named model instances need to be restricted to allow for distinct naming of resulting JSON and YAML properties, and XML elements. Uniqueness of names enables Metaschema aware parsers to map data elements in JSON, YAML, and XML into Metaschema module based <em>instances</em>.</div><h3 id=field-instance><a href=#field-instance><code>&lt;field></code> Instance</a></h3><p>A <em>field instance</em> is used to declare that a top-level <em>field definition</em> is part of the model of an <em>assembly definition</em>.</p><p>Attributes:</p><table><thead><tr><th style=text-align:left>Attribute</th><th style=text-align:left>Data Type</th><th style=text-align:left>Use</th><th style=text-align:left>Default Value</th></tr></thead><tbody><tr><td style=text-align:left><a href=/metaschema/specification/syntax/instances/#deprecated-version><code>@deprecated</code></a></td><td style=text-align:left>version (<a href=/metaschema/specification/datatypes/#string><code>string</code></a>)</td><td style=text-align:left>optional</td><td style=text-align:left><em>(no default)</em></td></tr><tr><td style=text-align:left><a href=/metaschema/specification/syntax/instances/#in-xml-1><code>@in-xml</code></a></td><td style=text-align:left><code>WRAPPED</code>,<code>WITH_WRAPPER</code> or <code>UNWRAPPED</code></td><td style=text-align:left>optional</td><td style=text-align:left><code>WRAPPED</code></td></tr><tr><td style=text-align:left><a href=/metaschema/specification/syntax/instances/#max-occurs><code>@max-occurs</code></a></td><td style=text-align:left><a href=/metaschema/specification/datatypes/#non-negative-integer><code>positive-integer</code></a> or <code>unbounded</code></td><td style=text-align:left>optional</td><td style=text-align:left><code>1</code></td></tr><tr><td style=text-align:left><a href=/metaschema/specification/syntax/instances/#min-occurs><code>@min-occurs</code></a></td><td style=text-align:left><a href=/metaschema/specification/datatypes/#non-negative-integer><code>non-negative-integer</code></a></td><td style=text-align:left>optional</td><td style=text-align:left><code>0</code></td></tr><tr><td style=text-align:left><a href=/metaschema/specification/syntax/instances/#ref><code>@ref</code></a></td><td style=text-align:left><a href=/metaschema/specification/datatypes/#token><code>token</code></a></td><td style=text-align:left>required</td><td style=text-align:left><em>(no default)</em></td></tr></tbody></table><p>Elements:</p><table><thead><tr><th style=text-align:left>Element</th><th style=text-align:left>Data Type</th><th style=text-align:left>Use</th></tr></thead><tbody><tr><td style=text-align:left><a href=/metaschema/specification/syntax/instances/#formal-name><code>&lt;formal-name></code></a></td><td style=text-align:left><a href=/metaschema/specification/datatypes/#string><code>string</code></a></td><td style=text-align:left>0 or 1</td></tr><tr><td style=text-align:left><a href=/metaschema/specification/syntax/instances/#description><code>&lt;description></code></a></td><td style=text-align:left><a href=/metaschema/specification/datatypes/#markup-line><code>markup-line</code></a></td><td style=text-align:left>0 or 1</td></tr><tr><td style=text-align:left><a href=/metaschema/specification/syntax/instances/#prop><code>&lt;prop></code></a></td><td style=text-align:left>special</td><td style=text-align:left>0 to ∞</td></tr><tr><td style=text-align:left><a href=/metaschema/specification/syntax/instances/#naming-and-use-name><code>&lt;use-name></code></a></td><td style=text-align:left><a href=/metaschema/specification/datatypes/#token><code>token</code></a></td><td style=text-align:left>0 or 1</td></tr><tr><td style=text-align:left><a href=/metaschema/specification/syntax/instances/#group-as><code>&lt;group-as></code></a></td><td style=text-align:left>special</td><td style=text-align:left>0 or 1</td></tr><tr><td style=text-align:left><a href=/metaschema/specification/syntax/instances/#remarks><code>&lt;remarks></code></a></td><td style=text-align:left>special</td><td style=text-align:left>0 or 1</td></tr></tbody></table><p>The attributes and elements specific to a <code>&lt;field></code> instance are described in the following subsections. The elements and attributes common to all named model instance types are <a href=/metaschema/specification/syntax/instances/#common-named-model-instance-data>defined earlier</a> in this specification.</p><p>The <a href=/metaschema/specification/syntax/instances/#ref><code>@ref</code></a> attribute MUST reference a top-level <em>field definition&rsquo;s</em> <a href=/metaschema/specification/syntax/definitions/#name><code>@name</code></a> that is in scope. See <a href=/metaschema/specification/syntax/module/#definition-name-resolution>Definition Name Resolution</a> for a detailed explanation of definition name scoping.</p><h4 id=in-xml-1><a href=#in-xml-1><code>@in-xml</code></a></h4><p>TODO: P2: describe this with examples</p><h3 id=define-field-instance><a href=#define-field-instance><code>&lt;define-field></code> Instance</a></h3><p>A <code>&lt;define-field></code> instance is a special type of <em>field instance</em> that also declares a new single use, <a href=/metaschema/specification/syntax/inline-definitions/#inline-define-field>inline <em>field definition</em></a>. It combines a subset of the data used to declare a <a href=/metaschema/specification/syntax/definitions/#top-level-define-field><em>field definition</em></a> and a <a href=/metaschema/specification/syntax/instances/#field-instance><em>field instance</em></a>.</p><p>The data model of the <a href=/metaschema/specification/syntax/inline-definitions/#inline-define-field>inline <code>&lt;define-field></code> instance</a> is covered in the section of the specification discussing <a href=/metaschema/specification/syntax/inline-definitions/>inline definitions</a>.</p><h3 id=assembly-instance><a href=#assembly-instance><code>&lt;assembly></code> Instance</a></h3><p>An <em>assembly instance</em> is used to declare that a top-level <em>assembly definition</em> is part of the model of an <em>assembly definition</em>.</p><p>Attributes:</p><table><thead><tr><th style=text-align:left>Attribute</th><th style=text-align:left>Data Type</th><th style=text-align:left>Use</th><th style=text-align:left>Default Value</th></tr></thead><tbody><tr><td style=text-align:left><a href=/metaschema/specification/syntax/instances/#deprecated-version><code>@deprecated</code></a></td><td style=text-align:left>version (<a href=/metaschema/specification/datatypes/#string><code>string</code></a>)</td><td style=text-align:left>optional</td><td style=text-align:left><em>(no default)</em></td></tr><tr><td style=text-align:left><a href=/metaschema/specification/syntax/instances/#max-occurs><code>@max-occurs</code></a></td><td style=text-align:left><a href=/metaschema/specification/datatypes/#non-negative-integer><code>positive-integer</code></a> or <code>unbounded</code></td><td style=text-align:left>optional</td><td style=text-align:left><code>1</code></td></tr><tr><td style=text-align:left><a href=/metaschema/specification/syntax/instances/#min-occurs><code>@min-occurs</code></a></td><td style=text-align:left><a href=/metaschema/specification/datatypes/#non-negative-integer><code>non-negative-integer</code></a></td><td style=text-align:left>optional</td><td style=text-align:left><code>0</code></td></tr><tr><td style=text-align:left><a href=/metaschema/specification/syntax/instances/#ref><code>@ref</code></a></td><td style=text-align:left><a href=/metaschema/specification/datatypes/#token><code>token</code></a></td><td style=text-align:left>required</td><td style=text-align:left><em>(no default)</em></td></tr></tbody></table><p>Elements:</p><table><thead><tr><th style=text-align:left>Element</th><th style=text-align:left>Data Type</th><th style=text-align:left>Use</th></tr></thead><tbody><tr><td style=text-align:left><a href=/metaschema/specification/syntax/instances/#formal-name><code>&lt;formal-name></code></a></td><td style=text-align:left><a href=/metaschema/specification/datatypes/#string><code>string</code></a></td><td style=text-align:left>0 or 1</td></tr><tr><td style=text-align:left><a href=/metaschema/specification/syntax/instances/#description><code>&lt;description></code></a></td><td style=text-align:left><a href=/metaschema/specification/datatypes/#markup-line><code>markup-line</code></a></td><td style=text-align:left>0 or 1</td></tr><tr><td style=text-align:left><a href=/metaschema/specification/syntax/instances/#prop><code>&lt;prop></code></a></td><td style=text-align:left>special</td><td style=text-align:left>0 to ∞</td></tr><tr><td style=text-align:left><a href=/metaschema/specification/syntax/instances/#naming-and-use-name><code>&lt;use-name></code></a></td><td style=text-align:left><a href=/metaschema/specification/datatypes/#token><code>token</code></a></td><td style=text-align:left>0 or 1</td></tr><tr><td style=text-align:left><a href=/metaschema/specification/syntax/instances/#group-as><code>&lt;group-as></code></a></td><td style=text-align:left>special</td><td style=text-align:left>0 or 1</td></tr><tr><td style=text-align:left><a href=/metaschema/specification/syntax/instances/#remarks><code>&lt;remarks></code></a></td><td style=text-align:left>special</td><td style=text-align:left>0 or 1</td></tr></tbody></table><p>There are no attributes or elements specific to an <code>&lt;assembly></code> instance. The elements and attributes common to all named model instance types are <a href=/metaschema/specification/syntax/instances/#common-named-model-instance-data>defined earlier</a> in this specification.</p><p>The <a href=/metaschema/specification/syntax/instances/#ref><code>@ref</code></a> attribute MUST reference a top-level <em>assembly definition&rsquo;s</em> <a href=/metaschema/specification/syntax/definitions/#name><code>@name</code></a> that is in scope. See <a href=/metaschema/specification/syntax/module/#definition-name-resolution>Definition Name Resolution</a> for a detailed explanation of definition name scoping.</p><h3 id=define-assembly-instance><a href=#define-assembly-instance><code>&lt;define-assembly></code> Instance</a></h3><p>A <code>&lt;define-assembly></code> instance is a special type of <em>field instance</em> that also declares a new single use, <a href=/metaschema/specification/syntax/inline-definitions/#inline-define-assembly>inline <em>assembly definition</em></a>. It combines a subset of the data used to declare a <a href=/metaschema/specification/syntax/definitions/#top-level-define-field><em>assembly definition</em></a> and a <a href=/metaschema/specification/syntax/instances/#assembly-instance><em>assembly instance</em></a>.</p><p>The data model of the <a href=/metaschema/specification/syntax/inline-definitions/#inline-define-assembly>inline <code>&lt;define-assembly></code> instance</a> is covered in the section of the specification discussing <a href=/metaschema/specification/syntax/inline-definitions/>inline definitions</a>.</p><h2 id=other-model-instance-types><a href=#other-model-instance-types>Other Model Instance Types</a></h2><p>The elements <a href=/metaschema/specification/syntax/instances/#choice-selections><code>&lt;choice></code></a> and <a href=/metaschema/specification/syntax/instances/#any><code>&lt;any></code></a> are specialized model instance types that have different semantics from the <a href=/metaschema/specification/syntax/instances/#named-model-instances>name model instances</a> above.</p><h3 id=choice-selections><a href=#choice-selections><code>&lt;choice></code> Selections</a></h3><p>Permits the mutually exclusive use of a non-empty set of <a href=/metaschema/specification/syntax/instances/#named-model-instances>named model instances</a>.</p><ul><li><a href=/metaschema/specification/syntax/instances/#assembly-instance><code>&lt;assembly></code></a> - Instantiates a globally defined <a href=/metaschema/specification/syntax/definitions/#top-level-define-assembly>assembly definition</a> as a model instance.</li><li><a href=/metaschema/specification/syntax/instances/#field-instance><code>&lt;field></code></a> - Instantiates a globally defined <a href=/metaschema/specification/syntax/definitions/#top-level-define-field>field definition</a> as a model instance.</li><li><a href=/metaschema/specification/syntax/inline-definitions/#inline-define-assembly><code>&lt;define-assembly></code></a> - Defines a <a href=/metaschema/specification/syntax/inline-definitions/#inline-define-assembly>single use assembly</a> for use as a model instance.</li><li><a href=/metaschema/specification/syntax/inline-definitions/#inline-define-field><code>&lt;define-field></code></a> - Defines a <a href=/metaschema/specification/syntax/inline-definitions/#inline-define-field>single use field</a> for use as a model instance.</li></ul><h3 id=any><a href=#any><code>&lt;any></code></a></h3><p>TODO: P2: describe this with examples</p></main></div></div><p class="font-sans-sm text-center" style="margin:1.5rem auto;clear:both">This page was last updated on August 30, 2024. <button id=main-improve-page onclick='window.location.href="https://github.com/usnistgov/metaschema/tree/master/website/content/specification/syntax/instances.md"' class=usa-button>Improve this Page</button></p><script type=text/javascript src=/metaschema/module/hugo-uswds/js/uswds.min.js></script><script>$(document).ready(function(){$('a[href*="//"]:not([href*="https://pages.nist.gov/metaschema/"]):not([href^="#"]):not([href^="/"])').addClass("usa-link usa-link--external")})</script></body></html>